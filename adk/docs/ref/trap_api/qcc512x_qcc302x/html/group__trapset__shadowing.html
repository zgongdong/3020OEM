<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Trap API: SHADOWING</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Trap API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__trapset__shadowing.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SHADOWING<div class="ingroups"><a class="el" href="group__api.html">Customer Trap API</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga63b42a026722c8ba6d58e044f36ad1ac"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__shadowing.html#ga63b42a026722c8ba6d58e044f36ad1ac">AclHandoverCancel</a> (uint16 handle)</td></tr>
<tr class="memdesc:ga63b42a026722c8ba6d58e044f36ad1ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">This trap may be called by the primary and the secondary devices to cancel the handover operation.  <a href="#ga63b42a026722c8ba6d58e044f36ad1ac">More...</a><br /></td></tr>
<tr class="separator:ga63b42a026722c8ba6d58e044f36ad1ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1fe68ad83bd05918d21fbbbba17bff94"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__shadowing.html#ga1fe68ad83bd05918d21fbbbba17bff94">AclHandoverCommit</a> (uint16 handle)</td></tr>
<tr class="memdesc:ga1fe68ad83bd05918d21fbbbba17bff94"><td class="mdescLeft">&#160;</td><td class="mdescRight">This trap should be called by both primary and secondary devices to commit to resuming operation with the shadowed device in the new secondary or primary role.  <a href="#ga1fe68ad83bd05918d21fbbbba17bff94">More...</a><br /></td></tr>
<tr class="separator:ga1fe68ad83bd05918d21fbbbba17bff94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaab0d70189633625fc907b0b079c5d4c1"><td class="memItemLeft" align="right" valign="top">uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__shadowing.html#gaab0d70189633625fc907b0b079c5d4c1">AclHandoverPrepare</a> (const <a class="el" href="structtp__bdaddr.html">tp_bdaddr</a> *acl_addr, const <a class="el" href="structtp__bdaddr.html">tp_bdaddr</a> *recipient)</td></tr>
<tr class="memdesc:gaab0d70189633625fc907b0b079c5d4c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare the device for ACL handover.  <a href="#gaab0d70189633625fc907b0b079c5d4c1">More...</a><br /></td></tr>
<tr class="separator:gaab0d70189633625fc907b0b079c5d4c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaed788b0415211275e525e52610b7f4ec"><td class="memItemLeft" align="right" valign="top">acl_handover_prepare_status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__shadowing.html#gaed788b0415211275e525e52610b7f4ec">AclHandoverPrepared</a> (uint16 handle)</td></tr>
<tr class="memdesc:gaed788b0415211275e525e52610b7f4ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the device is prepared to handover the ACL.  <a href="#gaed788b0415211275e525e52610b7f4ec">More...</a><br /></td></tr>
<tr class="separator:gaed788b0415211275e525e52610b7f4ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga840a2905a411b868d9023d834ec5b194"><td class="memItemLeft" align="right" valign="top"><a class="el" href="message___8h.html#a51d7b6544fb734b892b35ce3f56a579a">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__shadowing.html#ga840a2905a411b868d9023d834ec5b194">MessageSdmTask</a> (<a class="el" href="message___8h.html#a51d7b6544fb734b892b35ce3f56a579a">Task</a> task)</td></tr>
<tr class="memdesc:ga840a2905a411b868d9023d834ec5b194"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a task to handle BlueStack Shadow Manager(SDM) primitives.  <a href="#ga840a2905a411b868d9023d834ec5b194">More...</a><br /></td></tr>
<tr class="separator:ga840a2905a411b868d9023d834ec5b194"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6813630b903a29e82babf12570da67c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sink___8h.html#a250a23fcb6a29255bb2526a002d691b2">Sink</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__shadowing.html#ga6813630b903a29e82babf12570da67c0">StreamAclMarshalSink</a> (const <a class="el" href="structtp__bdaddr.html">tp_bdaddr</a> *tpaddr)</td></tr>
<tr class="memdesc:ga6813630b903a29e82babf12570da67c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the sink to unmarshal data for ACL link with given remote device.  <a href="#ga6813630b903a29e82babf12570da67c0">More...</a><br /></td></tr>
<tr class="separator:ga6813630b903a29e82babf12570da67c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac21e0ddc51ef09b8c8a3cef222db41a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="source___8h.html#afbe187e42995c6b6af38624c70e7a3e2">Source</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__shadowing.html#gac21e0ddc51ef09b8c8a3cef222db41a9">StreamAclMarshalSource</a> (const <a class="el" href="structtp__bdaddr.html">tp_bdaddr</a> *tpaddr)</td></tr>
<tr class="memdesc:gac21e0ddc51ef09b8c8a3cef222db41a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the source containing marshal data for ACL link with given remote device.  <a href="#gac21e0ddc51ef09b8c8a3cef222db41a9">More...</a><br /></td></tr>
<tr class="separator:gac21e0ddc51ef09b8c8a3cef222db41a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77efe5e6682d69e82b0250e415e9fa53"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trapset__shadowing.html#ga77efe5e6682d69e82b0250e415e9fa53">VmSendSdmPrim</a> (void *prim)</td></tr>
<tr class="memdesc:ga77efe5e6682d69e82b0250e415e9fa53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a BlueStack Shadow Manager(SDM) primitive.  <a href="#ga77efe5e6682d69e82b0250e415e9fa53">More...</a><br /></td></tr>
<tr class="separator:ga77efe5e6682d69e82b0250e415e9fa53"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga63b42a026722c8ba6d58e044f36ad1ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AclHandoverCancel </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This trap may be called by the primary and the secondary devices to cancel the handover operation. </p>
<p>On the primary side this trap may be called after calling <a class="el" href="group__trapset__shadowing.html#gaab0d70189633625fc907b0b079c5d4c1" title="Prepare the device for ACL handover. ">AclHandoverPrepare()</a> and before initiating a remote slave bdaddr change. On the secondary side this trap may be called before initiating a remote slave bdaddr change.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>On the primary device, this will be the handle value returned by "AclHandoverPrepare()". On the secondary device, this will be connection_handle parameter in shadow acl link create indication </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if operation is success, FALSE otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This trap may NOT be called from a high-priority task handler </dd></dl>

</div>
</div>
<a class="anchor" id="ga1fe68ad83bd05918d21fbbbba17bff94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AclHandoverCommit </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This trap should be called by both primary and secondary devices to commit to resuming operation with the shadowed device in the new secondary or primary role. </p>
<p>On the primary device, this trap should be called after successful device role switch and slave address change confirmation. On the secondary device, this trap should be called after slave address change confirmation. This trap should not be used on primary or secondary if <a class="el" href="group__trapset__shadowing.html#gaed788b0415211275e525e52610b7f4ec" title="Check if the device is prepared to handover the ACL. ">AclHandoverPrepared()</a> trap on primary returned failure status.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>On the primary device, this will be the handle value returned by "AclHandoverPrepare()". On the secondary device, this will be connection_handle parameter in shadow acl link create indication </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if operation is success, FALSE otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This trap may NOT be called from a high-priority task handler </dd></dl>

</div>
</div>
<a class="anchor" id="gaab0d70189633625fc907b0b079c5d4c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16 AclHandoverPrepare </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtp__bdaddr.html">tp_bdaddr</a> *&#160;</td>
          <td class="paramname"><em>acl_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtp__bdaddr.html">tp_bdaddr</a> *&#160;</td>
          <td class="paramname"><em>recipient</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare the device for ACL handover. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">acl_addr</td><td>The address of the device for which handover to be prepared. </td></tr>
    <tr><td class="paramname">recipient</td><td>The address of the recipient device. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Valid handle if handover preparation started successfully, otherwise returns 0xFFFF. This handle should be used in subsequent Aclhandover traps as a handle for this handover session.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This trap may NOT be called from a high-priority task handler </dd></dl>

</div>
</div>
<a class="anchor" id="gaed788b0415211275e525e52610b7f4ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">acl_handover_prepare_status AclHandoverPrepared </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if the device is prepared to handover the ACL. </p>
<p>This trap should be called after <a class="el" href="group__trapset__shadowing.html#gaab0d70189633625fc907b0b079c5d4c1" title="Prepare the device for ACL handover. ">AclHandoverPrepare()</a> trap.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>The handle value returned by "AclHandoverPrepare()". </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Status of the operation.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This trap may NOT be called from a high-priority task handler </dd></dl>

</div>
</div>
<a class="anchor" id="ga840a2905a411b868d9023d834ec5b194"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="message___8h.html#a51d7b6544fb734b892b35ce3f56a579a">Task</a> MessageSdmTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="message___8h.html#a51d7b6544fb734b892b35ce3f56a579a">Task</a>&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a task to handle BlueStack Shadow Manager(SDM) primitives. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>This task will receive #MESSAGE_BLUESTACK_SDM_PRIM. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The old task (or zero).</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This trap may be called from a high-priority task handler </dd></dl>

</div>
</div>
<a class="anchor" id="ga6813630b903a29e82babf12570da67c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sink___8h.html#a250a23fcb6a29255bb2526a002d691b2">Sink</a> StreamAclMarshalSink </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtp__bdaddr.html">tp_bdaddr</a> *&#160;</td>
          <td class="paramname"><em>tpaddr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the sink to unmarshal data for ACL link with given remote device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tpaddr</td><td>Bluetooth address of remote device. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if no ACL connection exists with remote device</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This trap may NOT be called from a high-priority task handler </dd></dl>

</div>
</div>
<a class="anchor" id="gac21e0ddc51ef09b8c8a3cef222db41a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="source___8h.html#afbe187e42995c6b6af38624c70e7a3e2">Source</a> StreamAclMarshalSource </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtp__bdaddr.html">tp_bdaddr</a> *&#160;</td>
          <td class="paramname"><em>tpaddr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the source containing marshal data for ACL link with given remote device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tpaddr</td><td>Bluetooth address of remote device. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if no ACL connection exists with remote device</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This trap may NOT be called from a high-priority task handler </dd></dl>

</div>
</div>
<a class="anchor" id="ga77efe5e6682d69e82b0250e415e9fa53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VmSendSdmPrim </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>prim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a BlueStack Shadow Manager(SDM) primitive. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">prim</td><td>A pointer to the primitive to send. The memory must have been dynamically allocated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This trap may be called from a high-priority task handler </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
