<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Earbud Application: Earbuds application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Earbud Application
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Earbuds application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Legal information </h1>
<center><b>For additional information or to submit technical questions, go to: <a href="https://createpoint.qti.qualcomm.com">https://createpoint.qti.qualcomm.com</a></b></center><center><b>Confidential and Proprietary – Qualcomm Technologies International, Ltd.</b></center><p><b>NO PUBLIC DISCLOSURE PERMITTED:</b> Please report postings of this document on public servers or websites to: <a href="#" onclick="location.href='mai'+'lto:'+'Doc'+'Ct'+'rlA'+'ge'+'nt@'+'qu'+'alc'+'om'+'m.c'+'om'; return false;">DocCt<span style="display: none;">.nosp@m.</span>rlAg<span style="display: none;">.nosp@m.</span>ent@q<span style="display: none;">.nosp@m.</span>ualc<span style="display: none;">.nosp@m.</span>omm.c<span style="display: none;">.nosp@m.</span>om</a>.</p>
<p><b>Restricted Distribution:</b> Not to be distributed to anyone who is not an employee of either Qualcomm Technologies International, Ltd. or its affiliated companies without the express approval of Qualcomm Configuration Management.</p>
<p>Not to be used, copied, reproduced, or modified in whole or in part, nor its contents revealed in any manner to others without the express written permission of Qualcomm Technologies International, Ltd.</p>
<p>All Qualcomm products mentioned herein are products of Qualcomm Technologies, Inc. and/or its subsidiaries.</p>
<p>Qualcomm is a trademark of Qualcomm Incorporated, registered in the United States and other countries. Other product and brand names may be trademarks or registered trademarks of their respective owners. This technical data may be subject to U.S. and international export, re-export, or transfer (“export”) laws. Diversion contrary to U.S. and international law is strictly prohibited.</p>
<p>Qualcomm Technologies International, Ltd. (formerly known as Cambridge Silicon Radio Limited) is a company registered in England and Wales with a registered office at: Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom. Registered Number: 3665875 | VAT number: GB787433096.</p>
<center><b>© 2018 Qualcomm Technologies, Inc. and/or its subsidiaries. All rights reserved.</b></center><h1>Overview </h1>
<p>This is a working sample application for earbuds supporting Qualcomm TrueWireless&trade; Stereo (TWS) and Qualcomm TrueWireless&trade; Stereo Plus (TWS+).</p>
<p>The application is usable as delivered, but expectation is that customers will adapt the application. Options for doing this include </p><ul>
<li>Build defines to control features included </li>
<li>Changes to the configuration (<a class="el" href="earbud__config_8h.html">earbud_config.h</a>) </li>
<li>Software changes <pre class="fragment">        @startuml

        class init &lt;&lt; (T,Green) &gt;&gt; #paleGreen {
            Initialise the application
            ....
            Initialises all other modules
            at startup
        }
        class led &lt;&lt; (T,lightblue) &gt;&gt; {
            Manages the LEDs
            }
        class hfp &lt;&lt; (T,lightblue) &gt;&gt; #Orange {
            Manages HFP connections
            }
        class ui &lt;&lt; (T,lightblue) &gt;&gt; #Orange {
            Manages the UI
            }
        class sm &lt;&lt; (T,lightblue) &gt;&gt; #lightBlue {
            Main application state machine
            }
        class link_policy &lt;&lt; (T,lightblue) &gt;&gt; {
            Manages the device link policy settings
            }
        class av &lt;&lt; (T,lightblue) &gt;&gt; #Orange {
            Manages A2DP and AVRCP connections
            }
        class charger &lt;&lt; (T,lightblue) &gt;&gt; {
            Manages the charger
            }
        class battery &lt;&lt; (T,lightblue) &gt;&gt; {
            Manages the battery status
            }
        class temperature &lt;&lt; (T,lightblue) &gt;&gt; {
            Temperature measurement
            }
        class power &lt;&lt; (T,lightblue) &gt;&gt; #Orange {
            Manages power, shutdown, sleep
            }
        class pairing &lt;&lt; (T,lightblue) &gt;&gt; #Orange {
            Manages peer and handset pairing
            }
        class scanning &lt;&lt; (T,lightblue) &gt;&gt; {
            Manages the device scanning state
            }
        class device &lt;&lt; (T,lightblue) &gt;&gt; {
            Paired devices database
            }
        class con_manager &lt;&lt; (T,lightblue) &gt;&gt; {
            Manages the device connection state machine
            }
        class peer_sig &lt;&lt; (T,lightblue) &gt;&gt; {
            Manages peer signalling messages
            }
        class handset_sig &lt;&lt; (T,lightblue) &gt;&gt; {
            Manages the handset signalling messages
            }
        class phy_state &lt;&lt; (T,lightblue) &gt;&gt; #Orange {
            Manages physcial state of the Earbud
            }
        class kymera &lt;&lt; (T,lightblue) &gt;&gt; {
            Manages the audio subsystem
            }
        class upgrade &lt;&lt; (T,red) &gt;&gt; #lightGrey {
            Manages the device upgrade
            }
        class proximity &lt;&lt; (T,lightblue) &gt;&gt; {
            Manages the proximity sensor
            }
        class accelerometer &lt;&lt; (T,lightblue) &gt;&gt; {
            Manages the accelerometer
            }
        class rules &lt;&lt; (.,red) &gt;&gt; #yellow {
            Application rules engine
            }
        class chains &lt;&lt; (.,red) &gt;&gt; #pink {
            User defined audio chains
            }
        class buttons &lt;&lt; (.,red) &gt;&gt; #pink {
            User defined button inputs
            }
        class peer_sync &lt;&lt; (T,lightblue) &gt;&gt; {
            Peer Earbud state synchronisation
            }
        class scofwd &lt;&lt; (T,lightblue) &gt;&gt; {
            SCO and MIC forwarding
            }

        class A &lt;&lt; (T,lightblue) &gt;&gt; {
        }

        class B &lt;&lt; (T,lightblue) &gt;&gt; {
        }

        init -[hidden]right-&gt;upgrade
        upgrade -[hidden]right-&gt;device
                    device -[hidden]right-&gt; A
                    A -[hidden]d-&gt; charger

                    A -right-&gt; B : Function Call
                    A -right[#blue]-&gt; B : Registered Event
                    A &lt;-right[#green]-&gt; B : Function and Registered Event

                    rules-d[#blue]-&gt;sm : Actions
                    sm -u-&gt; rules : Events
                    chains-l-&gt;kymera
                    buttons-l-&gt;ui

                    ' Physical Inputs
                    temperature -d[#blue]-&gt; power : temperature status
                    temperature -r[#blue]-&gt; charger : temperature status
                    charger -d[#blue]-&gt; phy_state : charger status (in/out case)
                    'charger -[hidden]r-&gt;accelerometer
                    battery -[hidden]r-&gt;temperature
                    charger -d[#blue]-&gt; power : charger status
                    battery -d[#blue]-&gt; power : battery status
                    proximity -d[#blue]-&gt; phy_state : in/out ear
                    proximity -[hidden]r-&gt;accelerometer
                    accelerometer -d[#blue]-&gt; phy_state :  motion status
                    power -d[#blue]-&gt; sm : power events
                    phy_state -d[#blue]-&gt; sm : phy state
                    phy_state -[#blue]-&gt; handset_sig : phy state

                    'UI control
                    sm -r-&gt; ui : ui indications
                    ui -u-&gt; led : enable/disable
                    ui -d-&gt; kymera : tones

                    'Registered con_manager tasks
                    con_manager -[#blue]&gt; sm : con status
                    con_manager -r[hidden]-&gt; link_policy
                    av &lt;-[#green]-&gt; con_manager : con/dis/status
                    hfp &lt;-[#green]-&gt; con_manager : con/dis/status
                    peer_sig -r-&gt; con_manager : con/dis

                    sm -l-&gt; pairing : Pair handset and earbud
                    pairing -d-&gt; scanning : enable/disable
                    sm -d-&gt; scanning : enable/disable

                    sm &lt;-d[#green]-&gt; hfp : con/dis/status
                    hfp -d[#blue]-&gt; scofwd : hfp status
                    scofwd -r-&gt; kymera : voice call
                    hfp &lt;-u[#green]-&gt; handset_sig : con/dis/sig
                    hfp -d-&gt; link_policy

                    sm &lt;-d[#green]-&gt; av : con/dis/status
                    av &lt;-u[#green]-&gt; handset_sig : con/dis/sig
                    av -d-&gt; link_policy
                    av -r-&gt; kymera : stereo music

                    peer_sig -d[#blue]-&gt; sm
                    peer_sig -u-&gt; scanning : enable/disable

                    peer_sync -r[hidden]-&gt; pairing
                    peer_sync -r[#blue]-&gt;sm : sync status
                    peer_sync &lt;-d[#green]-&gt; peer_sig : peer sync sig

                    sm -d-&gt; scofwd : con/dis
                    scofwd -l-&gt; peer_sig : scofwd sig
                    scofwd -u-&gt; link_policy

                    @enduml
</pre> </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
